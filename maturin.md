https://github.com/PyO3/maturin/blob/d51f86d90946e5b28fe84a9495e5b20a7588a1ae/src/compile.rs
https://github.com/PyO3/maturin/blob/d51f86d90946e5b28fe84a9495e5b20a7588a1ae/src/cross_compile.rs
https://github.com/PyO3/maturin/blob/d51f86d90946e5b28fe84a9495e5b20a7588a1ae/src/build_options.rs


## å‚æ•°
### -i / --interpreter å‚æ•°æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™ä¸ªå‚æ•°ç”¨æ¥å‘Šè¯‰ maturin æ‚¨æƒ³ä¸ºå“ªä¸ªæˆ–å“ªäº› Python è§£é‡Šå™¨æ„å»º wheel æ–‡ä»¶ã€‚

åº”è¯¥ç»™å®ƒä¼ é€’ä»€ä¹ˆå€¼ï¼Ÿ

æ ¹æ®æ‚¨æ˜¯æ­£å¸¸ç¼–è¯‘è¿˜æ˜¯äº¤å‰ç¼–è¯‘ï¼Œéœ€è¦æä¾›ä¸åŒç±»å‹çš„å€¼ï¼š

1. æ­£å¸¸ç¼–è¯‘ (åœ¨æ‚¨çš„ç”µè„‘ä¸Šä¸ºæ‚¨çš„ç”µè„‘ç¼–è¯‘):
    æ‚¨åº”è¯¥æä¾› Python è§£é‡Šå™¨çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ã€‚
    * ä¾‹å¦‚: /usr/bin/python3.9 æˆ– C:\Python39\python.exeã€‚
    * å¦‚æœè§£é‡Šå™¨åœ¨æ‚¨çš„ PATH ç¯å¢ƒå˜é‡ä¸­ï¼Œä¹Ÿå¯ä»¥åªç”¨åå­—ï¼Œå¦‚ python3.9ã€‚

2. äº¤å‰ç¼–è¯‘ (ä¾‹å¦‚ï¼Œåœ¨ x86 ç”µè„‘ä¸Šä¸º aarch64 æ¶æ„çš„ Android ç³»ç»Ÿç¼–è¯‘ï¼Œè¿™æ­£æ˜¯æ‚¨å½“å‰åœ¨åšçš„äº‹):
    åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç›®æ ‡ Python
è§£é‡Šå™¨æ— æ³•åœ¨å½“å‰çš„æœºå™¨ä¸Šè¿è¡Œã€‚å› æ­¤ï¼Œæ‚¨ä¸åº”è¯¥æä¾›å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œè€Œæ˜¯æä¾›ä¸€ä¸ªè§£é‡Šå™¨åç§°å­—ç¬¦ä¸²ã€‚
    * ä¾‹å¦‚: python3.13 æˆ– pypy3.8ã€‚
    * maturin ä¼šä½¿ç”¨è¿™ä¸ªå­—ç¬¦ä¸²æ¥æŸ¥æ‰¾åŒ¹é…çš„ã€é¢„å…ˆå‡†å¤‡å¥½çš„ Python é…ç½®ä¿¡æ¯ï¼ˆå³ sysconfigdata
        æ–‡ä»¶ï¼‰ï¼Œè€Œä¸æ˜¯å°è¯•å»æ‰§è¡Œå®ƒã€‚

å½“ç„¶å¯ä»¥ã€‚è¿™ä¸ªç»“è®ºæ¥è‡ªäºå¯¹ `maturin` æºç ä¸­ `src/build_options.rs` æ–‡ä»¶é‡Œä¸€ä¸ªåä¸º `find_interpreter_in_sysconfig` å‡½æ•°çš„åˆ†æã€‚

å½“è¿›è¡Œäº¤å‰ç¼–è¯‘ä¸”ç”¨æˆ·æä¾›äº† `-i` å‚æ•°æ—¶ï¼Œ`maturin` ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥è§£æå‚æ•°ã€‚

ä»¥ä¸‹æ˜¯è¯¥å‡½æ•°ä¸­çš„å…³é”®ä»£ç ç‰‡æ®µï¼š

```rust
// in src/build_options.rs -> fn find_interpreter_in_sysconfig

fn find_interpreter_in_sysconfig(
    // ...
    interpreter: &[PathBuf], // <- è¿™æ˜¯ä» -i å‚æ•°è·å–çš„å€¼
    // ...
) -> Result<Vec<PythonInterpreter>> {
    // ...
    for interp in interpreter {
        let python = interp.display().to_string();
        let (python_impl, python_ver, abiflags) = 
            if let Some(ver) = python.strip_prefix("pypy") {
                // ...
            } else if let Some(ver) = python.strip_prefix("python") {
                // ...
            } 
            // ... å…¶ä»–è§£æé€»è¾‘ ...
            else {
                // å¦‚æœä»¥ä¸Šæ‰€æœ‰å­—ç¬¦ä¸²åŒ¹é…éƒ½å¤±è´¥äº†ï¼Œåˆ™æ‰§è¡Œè¿™é‡Œçš„é€»è¾‘
                if std::path::Path::new(&python).is_file() {
                    // å¦‚æœå‘ç°è¾“å…¥å€¼æ˜¯ä¸€ä¸ªå­˜åœ¨çš„æ–‡ä»¶è·¯å¾„
                    bail!(
                        "Python interpreter should be a kind of interpreter (e.g. 'python3.14' or 'pypy3.11') when cross-compiling, got path to interpreter: {}",
                        python
                    );
                } else {
                    // å¦‚æœä¹Ÿä¸æ˜¯æ–‡ä»¶ï¼Œå°±æŠ¥å‘Šä¸æ”¯æŒ
                    bail!(
                        "Unsupported Python interpreter for cross-compilation: {}",
                        python
                    );
                }
            };
        // ...
    }
    Ok(interpreters)
}
```

**ç»“è®ºåˆ†æ:**

1.  ä»£ç é¦–å…ˆä¼šå°è¯•å°† `-i` çš„è¾“å…¥å€¼ï¼ˆä¾‹å¦‚ `python3.13`ï¼‰ä½œä¸ºå­—ç¬¦ä¸²è¿›è¡Œè§£æï¼Œå°è¯•åŒ¹é… `pypy`ã€`python` ç­‰å‰ç¼€ã€‚
2.  å¦‚æœæ‰€æœ‰å­—ç¬¦ä¸²åŒ¹é…éƒ½å¤±è´¥äº†ï¼Œä»£ç ä¼šè¿›å…¥ `else` å—ã€‚
3.  åœ¨è¿™ä¸ª `else` å—ä¸­ï¼Œå®ƒä¼šç”¨ `is_file()` æ¥æ£€æŸ¥è¿™ä¸ªè¾“å…¥å€¼æ˜¯ä¸æ˜¯ä¸€ä¸ª**æ–‡ä»¶è·¯å¾„**ã€‚
4.  **å¦‚æœå®ƒæ˜¯ä¸€ä¸ªæ–‡ä»¶è·¯å¾„**ï¼Œç¨‹åºä¼šç«‹åˆ»æŠ¥é”™é€€å‡º (`bail!`)ï¼Œå¹¶æ˜ç¡®æç¤ºï¼š**"åœ¨äº¤å‰ç¼–è¯‘æ—¶ï¼ŒPython è§£é‡Šå™¨åº”è¯¥æ˜¯ä¸€ä¸ªè§£é‡Šå™¨ç±»å‹ï¼ˆä¾‹å¦‚ 'python3.14'ï¼‰ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè§£é‡Šå™¨è·¯å¾„ã€‚"**

æ­£æ˜¯è¿™å¥é”™è¯¯æç¤ºï¼Œç›´æ¥è¯æ˜äº†åœ¨äº¤å‰ç¼–è¯‘åœºæ™¯ä¸‹ï¼Œ`maturin` æœŸæœ›å¾—åˆ°çš„æ˜¯ä¸€ä¸ªåç§°å­—ç¬¦ä¸²ï¼Œè€Œéä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ã€‚


#### ä¼ é€’åˆ° build_options.rs çš„ find_interpreters å‡½æ•°ä¸­

find_interpreters å‡½æ•°ä¸­çš„ interpreter å‚æ•°ï¼Œå…¶å€¼å°±æ˜¯ç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­é€šè¿‡ -i æˆ– --interpreter
  ä¼ å…¥çš„æ‰€æœ‰å€¼çš„é›†åˆã€‚


```rust
#[derive(Debug, Default, Serialize, Deserialize, clap::Parser, Clone, Eq, PartialEq)]
#[serde(default)]
pub struct BuildOptions {
    // ...

    /// The python versions to build wheels for, given as the executables of
    /// interpreters such as `python3.9` or `/usr/bin/python3.8`.
    #[arg(short, long, num_args = 0.., action = clap::ArgAction::Append)] // <--- è¯æ®åœ¨è¿™é‡Œ
    pub interpreter: Vec<PathBuf>,

    // ...
}
```




### PYO3_CROSS_LIB_DIR

å¦‚æœ `PYO3_CROSS_LIB_DIR` ç¯å¢ƒå˜é‡**å­˜åœ¨**ï¼Œ`maturin` ä¼šæ‰§è¡Œä¸€å¥—ä¸“é—¨ä¸ºäº¤å‰ç¼–è¯‘è®¾è®¡çš„ã€ç²¾ç¡®çš„é…ç½®æµç¨‹ã€‚è¿™æ­£æ˜¯æ‚¨é¡¹ç›®ä¸­ `build_android_wheel.py` è„šæœ¬æ‰€é‡‡ç”¨çš„ç­–ç•¥ã€‚

æ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š

1.  **æ£€æµ‹åˆ°å˜é‡**ï¼š`maturin` å¯åŠ¨æ—¶ï¼Œä¼šæ£€æŸ¥å¹¶å‘ç° `PYO3_CROSS_LIB_DIR` å·²ç»è¢«è®¾ç½®ã€‚

2.  **å¯»æ‰¾å¹¶ä½¿ç”¨â€œä¸»æœºâ€Python**ï¼š`maturin` éœ€è¦ä¸€ä¸ªèƒ½è¿è¡Œçš„ Python æ¥å¤„ç†ä¸€äº›è„šæœ¬ã€‚å› æ­¤ï¼Œå®ƒä¼šæ‰¾åˆ°æ‚¨æ„å»ºæœºå™¨ä¸Šï¼ˆä¸»æœºï¼‰å®‰è£…çš„ä¸€ä¸ª Python è§£é‡Šå™¨ã€‚æ‚¨ä¼šåœ¨æ—¥å¿—ä¸­çœ‹åˆ°ç±»ä¼¼ `ğŸ Using host python3.12 for cross-compiling preparation` çš„ä¿¡æ¯ã€‚

3.  **åœ¨æŒ‡å®šç›®å½•ä¸­æŸ¥æ‰¾ç›®æ ‡é…ç½®**ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚`maturin` ä¼šè¿›å…¥ `PYO3_CROSS_LIB_DIR` æ‰€æŒ‡å‘çš„ç›®å½•ï¼ˆä¹Ÿå°±æ˜¯æ‚¨çš„è„šæœ¬ä¸‹è½½å¹¶è§£å‹çš„ç›®æ ‡ Python åº“ç›®å½•ï¼‰ï¼Œå¹¶åœ¨å…¶ä¸­æœç´¢ `_sysconfigdata*.py` æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†**ç›®æ ‡å¹³å°**ï¼ˆä¾‹å¦‚ Android aarch64ï¼‰çš„ Python ç¯å¢ƒçš„æ‰€æœ‰æ„å»ºä¿¡æ¯ã€‚

4.  **è§£æç›®æ ‡é…ç½®**ï¼šæ‰¾åˆ°é…ç½®æ–‡ä»¶åï¼Œ`maturin` ä¼šä½¿ç”¨ç¬¬ 2 æ­¥æ‰¾åˆ°çš„â€œä¸»æœºâ€ Python æ¥æ‰§è¡Œä¸€ä¸ªè§£æè„šæœ¬ï¼Œä» `_sysconfigdata*.py` æ–‡ä»¶ä¸­æå–å‡ºæ‰€æœ‰äº¤å‰ç¼–è¯‘æ‰€å¿…éœ€çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š
    *   ç›®æ ‡ Python çš„ä¸»ã€æ¬¡ç‰ˆæœ¬å·ï¼ˆmajor, minor versionï¼‰
    *   ABI æ ‡å¿—ï¼ˆABIFLAGSï¼‰
    *   åŠ¨æ€é“¾æ¥åº“çš„åç¼€åï¼ˆEXT_SUFFIX, ä¾‹å¦‚ `.so`ï¼‰
    *   SOABIï¼ˆä¾‹å¦‚ `cpython-313-aarch64-linux-android`ï¼‰

5.  **åˆ›å»ºâ€œè™šæ‹Ÿâ€è§£é‡Šå™¨**ï¼š`maturin` å°†ä¸Šä¸€æ­¥æå–åˆ°çš„æ‰€æœ‰é…ç½®ä¿¡æ¯ï¼Œåœ¨å†…å­˜ä¸­æ„å»ºå‡ºä¸€ä¸ªå…³äºâ€œç›®æ ‡ Pythonâ€çš„æè¿°å¯¹è±¡ï¼ˆä¸€ä¸ª `PythonInterpreter` ç»“æ„ä½“ï¼‰ã€‚è¿™ä¸ªå¯¹è±¡æ˜¯â€œè™šæ‹Ÿâ€çš„ï¼Œå› ä¸ºå®ƒä¸å¯¹åº”ä¸€ä¸ªå¯ä»¥åœ¨å½“å‰æœºå™¨ä¸Šè¿è¡Œçš„ç¨‹åºï¼ˆå…¶ `runnable` æ ‡å¿—ä¸º `false`ï¼‰ï¼Œä½†å®ƒåŒ…å«äº†æ‰€æœ‰ç¼–è¯‘æ‰€éœ€çš„å…³é”®ä¿¡æ¯ã€‚

6.  **ç»§ç»­æ„å»º**ï¼šæœ‰äº†è¿™ä¸ªåŒ…å«å®Œæ•´ç›®æ ‡ä¿¡æ¯çš„â€œè™šæ‹Ÿâ€è§£é‡Šå™¨å¯¹è±¡ï¼Œ`maturin` å°±æ¸…æ¥šåœ°çŸ¥é“äº†åº”è¯¥å¦‚ä½•ä¸ºç›®æ ‡å¹³å°ï¼ˆAndroidï¼‰æ„å»º wheel æ–‡ä»¶ï¼Œä¾‹å¦‚åº”è¯¥å¦‚ä½•å‘½åæœ€ç»ˆçš„ `.so` æ–‡ä»¶ã€åº”è¯¥ä½¿ç”¨ä»€ä¹ˆç¼–è¯‘å’Œé“¾æ¥å‚æ•°ç­‰ã€‚ç„¶åï¼Œå®ƒä¼šå¸¦ç€è¿™äº›ä¿¡æ¯ç»§ç»­æ‰§è¡Œåç»­çš„ `cargo` ç¼–è¯‘å’Œé“¾æ¥æ­¥éª¤ã€‚

**æ€»ç»“ï¼š**

å½“ `PYO3_CROSS_LIB_DIR` å­˜åœ¨æ—¶ï¼Œ`maturin` å°±ä¼š**ä¿¡ä»»å¹¶ä½¿ç”¨æ‚¨ä¸ºå®ƒå‡†å¤‡çš„è¿™ä¸ªå¤–éƒ¨ Python åº“**ï¼Œå°†å…¶ä½œä¸ºäº¤å‰ç¼–è¯‘ä¿¡æ¯çš„å”¯ä¸€æ¥æºã€‚è¿™æ˜¯ä¸€ç§æ¯”ä¾èµ– `maturin` å†…ç½®æ•°æ®åº“æ›´ç²¾ç¡®ã€æ›´çµæ´»çš„äº¤å‰ç¼–è¯‘æ–¹å¼ã€‚

---

å¦‚æœ `PYO3_CROSS_LIB_DIR` ç¯å¢ƒå˜é‡ä¸å­˜åœ¨ï¼Œ`maturin` ä¼šå¯åŠ¨ä¸€ä¸ªåå¤‡ï¼ˆfallbackï¼‰ç­–ç•¥æ¥è·å–ç›®æ ‡ Python çš„é…ç½®ä¿¡æ¯ã€‚

è¿™ä¸ªåå¤‡ç­–ç•¥å®Œå…¨ä¾èµ–äºæ‚¨æä¾›ç»™ `-i` / `--interpreter` å‚æ•°çš„**è§£é‡Šå™¨åç§°å­—ç¬¦ä¸²**ã€‚

å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š

1.  **æ”¾å¼ƒå¤–éƒ¨æŸ¥æ‰¾**ï¼š`maturin` ä¸å†å°è¯•ä»æ‚¨æä¾›çš„å¤–éƒ¨ç›®å½• (`PYO3_CROSS_LIB_DIR`) ä¸­å¯»æ‰¾ `_sysconfigdata.py` æ–‡ä»¶ã€‚

2.  **æŸ¥è¯¢å†…ç½®æ•°æ®åº“**ï¼š`maturin` ä¼šè½¬è€ŒæŸ¥è¯¢ä¸€ä¸ª**å†…ç½®äº `maturin` ç¨‹åºè‡ªèº«**çš„ã€é¢„å…ˆæ‰“åŒ…å¥½çš„ `sysconfig` æ•°æ®åº“ã€‚

3.  **åŒ¹é…è§£é‡Šå™¨åç§°**ï¼šå®ƒä¼šè·å–æ‚¨é€šè¿‡ `-i` å‚æ•°æä¾›çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ `python3.13`ï¼‰ï¼Œç„¶ååœ¨è¿™ä¸ªå†…ç½®æ•°æ®åº“ä¸­æŸ¥æ‰¾ä¸ä¹‹åŒ¹é…çš„ Python ç‰ˆæœ¬é…ç½®ã€‚

4.  **æ‰¾åˆ°åˆ™ç»§ç»­**ï¼šå¦‚æœ `maturin` åœ¨å…¶å†…ç½®æ•°æ®ä¸­æ‰¾åˆ°äº†åŒ¹é…çš„é…ç½®ï¼Œå®ƒå°±ä¼šä½¿ç”¨è¿™ä»½é…ç½®ä¿¡æ¯ç»§ç»­è¿›è¡Œäº¤å‰ç¼–è¯‘ã€‚

5.  **æ‰¾ä¸åˆ°åˆ™å¤±è´¥**ï¼šå¦‚æœå‡ºç°ä»¥ä¸‹ä»»ä¸€æƒ…å†µï¼Œæ„å»ºå°†ä¼šå¤±è´¥ï¼š
    *   æ‚¨æ²¡æœ‰è®¾ç½® `PYO3_CROSS_LIB_DIR`ï¼Œ**å¹¶ä¸”**ä¹Ÿæ²¡æœ‰æä¾› `-i` å‚æ•°ã€‚
    *   æ‚¨æä¾›äº† `-i` å‚æ•°ï¼Œä½† `maturin` çš„å†…ç½®æ•°æ®åº“ä¸­æ²¡æœ‰åŒ…å«æ‚¨æŒ‡å®šçš„é‚£ä¸ª Python ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªéå¸¸æ–°æˆ–éå¸¸æ—§çš„ç‰ˆæœ¬ï¼‰ã€‚

**æ€»ç»“ï¼š**

å¦‚æœ `PYO3_CROSS_LIB_DIR` æœªè®¾ç½®ï¼Œ`maturin` ä¼šä»â€œä¾èµ–å¤–éƒ¨æä¾›é…ç½®â€æ¨¡å¼åˆ‡æ¢åˆ°â€œä½¿ç”¨å†…éƒ¨è‡ªå¸¦é…ç½®â€æ¨¡å¼ã€‚æ­¤æ—¶ï¼Œ`-i` å‚æ•°å°±æˆäº†å®ƒå®šä½å†…éƒ¨é…ç½®çš„å”¯ä¸€çº¿ç´¢ã€‚



### PYO3_CROSS_LIB_DIR å’Œ -i å‚æ•°ç»„åˆæƒ…å†µåˆ†æ

å¥½çš„ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹åœ¨**äº¤å‰ç¼–è¯‘**æ—¶ï¼Œ`maturin` æ ¹æ® `PYO3_CROSS_LIB_DIR` ç¯å¢ƒå˜é‡å’Œ `-i` (`--interpreter`) å‚æ•°çš„ä¸åŒç»„åˆï¼Œæ€»å…±æœ‰ä»¥ä¸‹å››ç§æƒ…å†µï¼š

---

#### æƒ…å†µ 1ï¼š`PYO3_CROSS_LIB_DIR` å·²è®¾ç½®ï¼Œ `-i` æœªè®¾ç½®

è¿™æ˜¯æ‚¨å½“å‰æ„å»ºè„šæœ¬çš„æ¨¡å¼ï¼Œä¹Ÿæ˜¯ `maturin` äº¤å‰ç¼–è¯‘æ—¶æ¨èçš„â€œè‡ªåŠ¨æ¨¡å¼â€ã€‚

*   **è¡Œä¸ºæè¿°**:
    1.  `maturin` æ£€æµ‹åˆ° `PYO3_CROSS_LIB_DIR`ï¼ŒçŸ¥é“å¤–éƒ¨å·²ç»å‡†å¤‡å¥½äº†ç›®æ ‡ Python åº“ã€‚
    2.  ç”±äºæœªæŒ‡å®š `-i`ï¼Œ`maturin` ä¼š**è‡ªåŠ¨åœ¨æ„å»ºä¸»æœºä¸Šæœç´¢**ä¸€ä¸ªå¯ç”¨çš„ Python è§£é‡Šå™¨ï¼Œä½œä¸ºè§£æå·¥å…·ã€‚
    3.  ä½¿ç”¨æ‰¾åˆ°çš„ä¸»æœº Python å»è§£æ `PYO3_CROSS_LIB_DIR` ç›®å½•ä¸‹çš„ `_sysconfigdata` é…ç½®æ–‡ä»¶ã€‚
    4.  æ ¹æ®è§£æç»“æœï¼Œåœ¨å†…å­˜ä¸­ä¸ºç›®æ ‡å¹³å°ï¼ˆAndroidï¼‰åˆ›å»ºä¸€ä¸ªâ€œè™šæ‹Ÿâ€çš„ Python é…ç½®ã€‚
*   **æœ€ç»ˆç»“æœ**:
    *   **æˆåŠŸ**ï¼šåªè¦ä¸»æœºä¸Šèƒ½æ‰¾åˆ°ä¸€ä¸ª Pythonï¼Œå¹¶ä¸” `PYO3_CROSS_LIB_DIR` ç›®å½•ä¸‹çš„é…ç½®æœ‰æ•ˆã€‚
*   **ä»£ç è¯æ®**:
    1.  ç¨‹åºè¿›å…¥ `find_interpreters` å‡½æ•°åï¼Œç”±äº `PYO3_CROSS_LIB_DIR` å·²è®¾ç½®ï¼Œä¼šè¿›å…¥ `if let Some(cross_lib_dir) = ...` è¿™ä¸ªä»£ç å—ã€‚
    2.  å› ä¸º `-i` æœªè®¾ç½®ï¼Œä¼ é€’ç»™ `find_interpreter_in_host` çš„ `interpreter` å‚æ•°æ˜¯ä¸€ä¸ªç©ºåˆ—è¡¨ `&[]`ã€‚
        ```rust
        // in src/build_options.rs -> find_interpreters
        if let Some(cross_lib_dir) = env::var_os("PYO3_CROSS_LIB_DIR") {
            let host_interpreters = find_interpreter_in_host(
                bridge,
                interpreter, // <--- æ­¤å¤„ä¸ºä¸€ä¸ªç©ºåˆ—è¡¨
                target,
                requires_python,
            )?;
            // ...
        ```
    3.  åœ¨ `find_interpreter_in_host` å‡½æ•°å†…éƒ¨ï¼Œç”±äº `interpreter` åˆ—è¡¨ä¸ºç©ºï¼Œ`!interpreter.is_empty()` ä¸º `false`ï¼Œå› æ­¤æ‰§è¡Œ `else` åˆ†æ”¯ï¼Œè‡ªåŠ¨åœ¨ä¸»æœºä¸Šæœç´¢æ‰€æœ‰ Pythonã€‚
        ```rust
        // in src/build_options.rs -> find_interpreter_in_host
        fn find_interpreter_in_host(
            //...
            interpreter: &[PathBuf], // <--- æ¥æ”¶åˆ°ç©ºåˆ—è¡¨
            //...
        ) -> Result<Vec<PythonInterpreter>> {
            let interpreters = if !interpreter.is_empty() { // <--- æ¡ä»¶ä¸º false
                // ...
            } else {
                // æ‰§è¡Œæ­¤å¤„çš„é€»è¾‘
                PythonInterpreter::find_all(target, bridge, requires_python)
                    .context("Finding python interpreters failed")?
            };
            // ...
        ```



#### æƒ…å†µ 2ï¼š`PYO3_CROSS_LIB_DIR` å·²è®¾ç½®ï¼Œ `-i` å·²è®¾ç½®

`-i` å‚æ•°çš„å«ä¹‰æ˜¯**æŒ‡å®šä¸€ä¸ªä¸»æœºä¸Šçš„ Python è§£é‡Šå™¨ä½œä¸ºè§£æå·¥å…·**ã€‚

*   **è¡Œä¸ºæè¿°**:
    1.  `maturin` æ£€æµ‹åˆ° `PYO3_CROSS_LIB_DIR`ã€‚
    2.  å®ƒä¼šæŸ¥çœ‹ `-i` ä¼ å…¥çš„å€¼ï¼ˆä¾‹å¦‚ `-i python3.9`ï¼‰ï¼Œå¹¶å°è¯•åœ¨**ä¸»æœº**ä¸Šæ‰¾åˆ°è¿™ä¸ªåä¸º `python3.9` çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚
    3.  å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±ä½¿ç”¨è¿™ä¸ª**æ‚¨æŒ‡å®šçš„**ä¸»æœº Python å»è§£æ `PYO3_CROSS_LIB_DIR` ç›®å½•ä¸‹çš„ç›®æ ‡é…ç½®ã€‚
*   **æœ€ç»ˆç»“æœ**:
    *   **æˆåŠŸ**ï¼šå¦‚æœ `-i` æŒ‡å‘äº†ä¸€ä¸ªåœ¨ä¸»æœºä¸ŠçœŸå®å­˜åœ¨ä¸”å¯è¿è¡Œçš„ Python è§£é‡Šå™¨ã€‚
    *   **å¤±è´¥**ï¼šå¦‚æœ `-i` æŒ‡å‘çš„è§£é‡Šå™¨åœ¨ä¸»æœºä¸Šä¸å­˜åœ¨ï¼Œæˆ–è€…æ‚¨æä¾›äº†ä¸€ä¸ªç›®æ ‡å¹³å°çš„åç§°å­—ç¬¦ä¸²ï¼ˆå¦‚ `python3.13`ï¼‰ï¼Œä½†ä¸»æœºä¸Šæ²¡æœ‰åŒåçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚

*   **ä»£ç è¯æ®**:
    1.  åŒæ ·ï¼Œç¨‹åºè¿›å…¥ `if let Some(cross_lib_dir) = ...` ä»£ç å—ã€‚
    2.  è°ƒç”¨ `find_interpreter_in_host`ï¼Œä½†è¿™æ¬¡ `interpreter` å‚æ•°åŒ…å«äº†ä» `-i` ä¼ å…¥çš„å€¼ã€‚
        ```rust
        // in src/build_options.rs -> find_interpreters
        if let Some(cross_lib_dir) = env::var_os("PYO3_CROSS_LIB_DIR") {
            let host_interpreters = find_interpreter_in_host(
                bridge,
                interpreter, // <--- æ­¤å¤„åŒ…å« -i ä¼ å…¥çš„å€¼
                target,
                requires_python,
            )?;
            // ...
        ```
    3.  åœ¨ `find_interpreter_in_host` å‡½æ•°å†…éƒ¨ï¼Œ`!interpreter.is_empty()` ä¸º `true`ï¼Œå› æ­¤æ‰§è¡Œ `if` åˆ†æ”¯ï¼Œå°† `-i` çš„å€¼ä½œä¸º**ä¸»æœºä¸Šçš„å¯æ‰§è¡Œæ–‡ä»¶**æ¥æ£€æŸ¥ã€‚
        ```rust
        // in src/build_options.rs -> find_interpreter_in_host
        fn find_interpreter_in_host(
            //...
            interpreter: &[PathBuf], // <--- æ¥æ”¶åˆ° -i çš„å€¼
            //...
        ) -> Result<Vec<PythonInterpreter>> {
            let interpreters = if !interpreter.is_empty() { // <--- æ¡ä»¶ä¸º true
                // æ‰§è¡Œæ­¤å¤„çš„é€»è¾‘ï¼Œæ£€æŸ¥è¿™äº›è·¯å¾„æ˜¯å¦æ˜¯ä¸»æœºä¸Šå¯è¿è¡Œçš„ Python
                PythonInterpreter::check_executables(interpreter, target, bridge)?
            } else {
                // ...
            };
            // ...
        ```

---

#### æƒ…å†µ 3ï¼š`PYO3_CROSS_LIB_DIR` æœªè®¾ç½®ï¼Œ `-i` å·²è®¾ç½®

è¿™æ˜¯â€œåå¤‡æ¨¡å¼â€ï¼Œ`maturin` ä¼šå°è¯•ä½¿ç”¨è‡ªå·±å†…ç½®çš„é…ç½®ã€‚

*   **è¡Œä¸ºæè¿°**:
    1.  `maturin` å‘ç°æ²¡æœ‰ `PYO3_CROSS_LIB_DIR`ã€‚
    2.  å®ƒä¼šæŠŠ `-i` ä¼ å…¥çš„å€¼ï¼ˆä¾‹å¦‚ `-i python3.13`ï¼‰ç†è§£ä¸º**ç›®æ ‡å¹³å°çš„åç§°å­—ç¬¦ä¸²**ã€‚
    3.  `maturin` ä¼šåœ¨**è‡ªèº«å†…ç½®çš„ã€é¢„æ‰“åŒ…çš„** Python `sysconfig` æ•°æ®åº“ä¸­æœç´¢ä¸ `python3.13` åŒ¹é…çš„é…ç½®ã€‚
*   **æœ€ç»ˆç»“æœ**:
    *   **æˆåŠŸ**ï¼šå¦‚æœ `maturin` çš„å†…ç½®æ•°æ®åº“æ­£å¥½åŒ…å«äº†æ‚¨æŒ‡å®šçš„é‚£ä¸ª Python ç‰ˆæœ¬çš„é…ç½®ã€‚
    *   **å¤±è´¥**ï¼šå¦‚æœ `-i` æŒ‡å®šçš„ç‰ˆæœ¬åœ¨ `maturin` çš„å†…ç½®æ•°æ®åº“ä¸­ä¸å­˜åœ¨ã€‚

â€œåå¤‡æ¨¡å¼â€ï¼Œ`-i` åœ¨æ­¤åœºæ™¯ä¸‹è¢«å½“ä½œ**ç›®æ ‡å¹³å°çš„åç§°å­—ç¬¦ä¸²**ã€‚

*   **ä»£ç è¯æ®**:
    1.  ç¨‹åºè¿›å…¥ `find_interpreters` å‡½æ•°åï¼Œ`if let Some(cross_lib_dir) = ...` æ¡ä»¶ä¸º `false`ï¼Œå› æ­¤æ‰§è¡Œå¤–å±‚çš„ `else` ä»£ç å—ã€‚
        ```rust
        // in src/build_options.rs -> find_interpreters
        if let Some(cross_lib_dir) = env::var_os("PYO3_CROSS_LIB_DIR") {
            // ... æ­¤å¤„é€»è¾‘è¢«è·³è¿‡ ...
        } else {
            // æ‰§è¡Œæ­¤å¤„çš„åå¤‡é€»è¾‘
            // ...
            interpreters = find_interpreter_in_sysconfig( // <--- è°ƒç”¨æ­¤å‡½æ•°
                bridge,
                interpreter, // <--- ä¼ å…¥ -i çš„å€¼
                target,
                requires_python,
            )?;
            // ...
        ```
    2.  åœ¨ `find_interpreter_in_sysconfig` å‡½æ•°ä¸­ï¼Œä»£ç æ˜ç¡®**æ‹’ç»æ–‡ä»¶è·¯å¾„**ï¼Œå¹¶æœŸæœ›ä¸€ä¸ªå¯è§£æçš„åç§°å­—ç¬¦ä¸²ã€‚
        ```rust
        // in src/build_options.rs -> find_interpreter_in_sysconfig
        // ...
        } else {
            if std::path::Path::new(&python).is_file() { // <--- æ£€æŸ¥æ˜¯å¦ä¸ºæ–‡ä»¶è·¯å¾„
                // å¦‚æœæ˜¯æ–‡ä»¶è·¯å¾„ï¼Œåˆ™æŠ¥é”™
                bail!("Python interpreter should be a kind of interpreter (e.g. 'python3.14' or 'pypy3.11') when cross-compiling, got path to interpreter: {}", python);
            } else {
        // ...
        ```



---

#### æƒ…å†µ 4ï¼š`PYO3_CROSS_LIB_DIR` æœªè®¾ç½®ï¼Œ `-i` ä¹Ÿæœªè®¾ç½®

ä¿¡æ¯ä¸è¶³ï¼Œç›´æ¥å¤±è´¥ã€‚

*   **è¡Œä¸ºæè¿°**:
    1.  `maturin` å‘ç°æ²¡æœ‰ `PYO3_CROSS_LIB_DIR`ã€‚
    2.  å®ƒæ¥ç€å‘ç°ä¹Ÿæ²¡æœ‰ `-i` å‚æ•°ã€‚
    3.  `maturin` æ— æ³•è·å–ä»»ä½•å…³äºç›®æ ‡ Python çš„ä¿¡æ¯ï¼Œå› æ­¤ä¼šç«‹å³æŠ¥é”™é€€å‡ºã€‚
*   **æœ€ç»ˆç»“æœ**:
    *   **ç«‹å³å¤±è´¥**ã€‚é”™è¯¯ä¿¡æ¯é€šå¸¸æ˜¯ `Couldn't find any python interpreters. Please specify at least one with -i`ã€‚
*   **ä»£ç è¯æ®**:
    1.  åŒæ ·ï¼Œç¨‹åºè¿›å…¥ `find_interpreters` çš„å¤–å±‚ `else` ä»£ç å—ã€‚
    2.  åœ¨è¯¥ä»£ç å—çš„å¼€å¤´ï¼Œç«‹å³æ£€æŸ¥ `interpreter` åˆ—è¡¨æ˜¯å¦ä¸ºç©ºã€‚ç”±äº `-i` æœªè®¾ç½®ï¼Œè¯¥åˆ—è¡¨ä¸ºç©ºï¼Œæ¡ä»¶æˆç«‹ï¼Œç¨‹åºæŠ¥é”™é€€å‡ºã€‚
        ```rust
        // in src/build_options.rs -> find_interpreters
        // ...
        } else {
            // æ‰§è¡Œæ­¤å¤„çš„åå¤‡é€»è¾‘
            if interpreter.is_empty() && !self.find_interpreter {
                // <--- æ­¤æ¡ä»¶ä¸º trueï¼Œç«‹å³æ‰§è¡Œ bail!
                bail!("Couldn't find any python interpreters. Please specify at least one with -i");
            }
            // ... åç»­ä»£ç ä¸ä¼šè¢«æ‰§è¡Œ
        ```


### MATURIN_PYTHON_SYSCONFIGDATA_DIR
âœ¦ MATURIN_PYTHON_SYSCONFIGDATA_DIR è¿™ä¸ªç¯å¢ƒå˜é‡æ˜¯ä¸º Target (ç›®æ ‡å¹³å°) çš„ Python å‡†å¤‡çš„ã€‚

è¿™ä¸ªç»“è®ºéå¸¸æ˜ç¡®ï¼Œæˆ‘ä»¬å¯ä»¥ä» src/build_options.rs æ–‡ä»¶ä¸­å®ƒè¢«è®¾ç½®æ—¶çš„ä¸Šä¸‹æ–‡çœ‹å‡ºæ¥ã€‚

ä»£ç è¯æ®å¦‚ä¸‹:

åœ¨ find_interpreters å‡½æ•°ä¸­ï¼Œå½“ PYO3_CROSS_LIB_DIR
è¢«è®¾ç½®æ—¶ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„â€œä¸“å®¶/è‡ªå®šä¹‰æ¨¡å¼â€ï¼‰ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š
```rust
// in src/build_options.rs -> find_interpreters

// ...
// cross_lib_dir æ¥æºäº PYO3_CROSS_LIB_DIR, æŒ‡å‘ç›®æ ‡å¹³å°çš„ Python åº“ç›®å½•
if let Some(cross_lib_dir) = env::var_os("PYO3_CROSS_LIB_DIR") {
    // ...

    // 1. åœ¨ç›®æ ‡å¹³å°çš„åº“ç›®å½•ä¸­æŸ¥æ‰¾ _sysconfigdata æ–‡ä»¶çš„å®Œæ•´è·¯å¾„
    let sysconfig_path =
        find_sysconfigdata(cross_lib_dir.as_ref(), target)?;

    // 2. è®¾ç½® MATURIN_PYTHON_SYSCONFIGDATA_DIR ç¯å¢ƒå˜é‡
    //    å®ƒçš„å€¼æ˜¯ç›®æ ‡å¹³å° _sysconfigdata æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•
    env::set_var(
        "MATURIN_PYTHON_SYSCONFIGDATA_DIR",
        sysconfig_path.parent().unwrap(),
    );

    // 3. ä½¿ç”¨ä¸»æœº Python æ¥è§£æè¿™ä¸ªç›®æ ‡å¹³å°çš„ sysconfig_path æ–‡ä»¶
    let sysconfig_data =
        parse_sysconfigdata(host_python, sysconfig_path)?;

    // ...
```
é€»è¾‘åˆ†æ:

1. æ•´ä¸ªæµç¨‹çš„èµ·ç‚¹æ˜¯ PYO3_CROSS_LIB_DIRï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“å®ƒæŒ‡å‘çš„æ˜¯ç›®æ ‡å¹³å°ï¼ˆä¾‹å¦‚ Androidï¼‰çš„ Python åº“ç›®å½•ã€‚
2. find_sysconfigdata å‡½æ•°åœ¨è¿™ä¸ªç›®æ ‡å¹³å°çš„ç›®å½•ä¸­æœç´¢ï¼Œæ‰¾åˆ°äº†å±äºç›®æ ‡å¹³å°çš„ _sysconfigdata*.py æ–‡ä»¶ã€‚
3. ç„¶åï¼Œä»£ç è·å–äº†è¿™ä¸ªæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼ˆsysconfig_path.parent()ï¼‰ï¼Œå¹¶å°†å…¶å€¼èµ‹ç»™äº†
    MATURIN_PYTHON_SYSCONFIGDATA_DIR ç¯å¢ƒå˜é‡ã€‚

å› æ­¤ï¼ŒMATURIN_PYTHON_SYSCONFIGDATA_DIR å˜é‡çš„å†…å®¹å°±æ˜¯ç›®æ ‡å¹³å° Python çš„ `sysconfig` 
æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è·¯å¾„ã€‚å®ƒå­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†åœ¨åç»­çš„ç¼–è¯‘æ­¥éª¤ä¸­ï¼ˆä¾‹å¦‚åœ¨ pyo3 çš„ build.rs
æ„å»ºè„šæœ¬ä¸­ï¼‰èƒ½å¤Ÿå†æ¬¡å®šä½åˆ°è¿™ä¸ªå…³é”®ç›®å½•ï¼Œç¡®ä¿ç¼–è¯‘æ—¶ä½¿ç”¨çš„æ˜¯æ­£ç¡®çš„ã€å±äºç›®æ ‡å¹³å°çš„ Python é…ç½®ã€‚

### `PYO3_CROSS_LIB_DIR` å’Œ `MATURIN_PYTHON_SYSCONFIGDATA_DIR`
æ‚¨å‘ç°äº†ä¸€ä¸ªéå¸¸æ ¸å¿ƒä¸”çœ‹èµ·æ¥å¾ˆå¥‡æ€ªçš„é€»è¾‘ï¼è¿™ç¡®å®æ˜¯æ•´ä¸ªæµç¨‹ä¸­æœ€å¾®å¦™ã€æœ€å®¹æ˜“è®©äººæ··æ·†çš„éƒ¨åˆ†ã€‚æ‚¨çš„è§‚å¯Ÿå®Œå…¨æ­£ç¡®ï¼Œæˆ‘æ¥ä¸ºæ‚¨è§£é‡Šè¿™å…¶ä¸­çš„å…³ç³»å’ŒåŸå› ã€‚

æ‚¨å¯ä»¥æŠŠè¿™ä¸ªè¿‡ç¨‹ç†è§£æˆä¸€åœº**â€œç¯å¢ƒå˜é‡çš„æ¥åŠ›èµ›â€**ï¼Œå…¶ç›®çš„æ˜¯**â€œè·¯å¾„çš„æ ‡å‡†åŒ–ä¸ä¼ é€’â€**ã€‚

`PYO3_CROSS_LIB_DIR` å’Œ `MATURIN_PYTHON_SYSCONFIGDATA_DIR` åœ¨è¿™åœºæ¥åŠ›èµ›ä¸­æ‰®æ¼”äº†ä¸åŒé˜¶æ®µçš„è§’è‰²ã€‚

---

#### ç¬¬ä¸€æ£’ï¼šæ„å»ºè„šæœ¬ -> `maturin`

*   **å˜é‡**: `PYO3_CROSS_LIB_DIR`
*   **è§’è‰²**: **è¾“å…¥**
*   **è¯´æ˜**: æ‚¨çš„ `build_android_wheel.py` è„šæœ¬é¦–å…ˆè®¾ç½®äº†è¿™ä¸ªå˜é‡ã€‚å®ƒçš„å€¼æ˜¯ä¸€ä¸ªç›¸å¯¹â€œç²—ç•¥â€çš„è·¯å¾„ï¼ˆä¾‹å¦‚ `.../prefix/lib`ï¼‰ï¼Œå®ƒå‘Šè¯‰ `maturin`ï¼šâ€œç›®æ ‡å¹³å°çš„ Python åº“å¤§æ¦‚åœ¨è¿™ä¸ªç›®å½•é‡Œï¼Œä½ å»é‡Œé¢æ‰¾æ‰¾çœ‹ã€‚â€

#### ç¬¬äºŒæ£’ï¼š`maturin` å†…éƒ¨å¤„ç† (`build_options.rs`)

*   **å˜é‡**: `MATURIN_PYTHON_SYSCONFIGDATA_DIR`
*   **è§’è‰²**: **å†…éƒ¨ä¸­é—´å˜é‡**
*   **è¯´æ˜**:
    1.  `maturin` å¯åŠ¨åï¼Œè¯»å–åˆ°ç¬¬ä¸€æ£’ä¼ æ¥çš„ `PYO3_CROSS_LIB_DIR`ã€‚
    2.  å®ƒåœ¨è¿™ä¸ªâ€œç²—ç•¥â€çš„ç›®å½•é‡Œæ‰§è¡Œ `find_sysconfigdata` å‡½æ•°ï¼Œè¿›è¡Œç²¾ç¡®æœç´¢ï¼Œæ‰¾åˆ°äº† `_sysconfigdata*.py` æ–‡ä»¶çš„**ç¡®åˆ‡ä½ç½®**ï¼ˆä¾‹å¦‚ `.../prefix/lib/python3.13/_sysconfigdata_...py`ï¼‰ã€‚
    3.  ç„¶åï¼Œ`maturin` å°†è¿™ä¸ªæ–‡ä»¶æ‰€åœ¨çš„**ç²¾ç¡®ç›®å½•**ï¼ˆ`.../prefix/lib/python3.13`ï¼‰å­˜å…¥å®ƒè‡ªå·±çš„ä¸€ä¸ªå†…éƒ¨ç¯å¢ƒå˜é‡ `MATURIN_PYTHON_SYSCONFIGDATA_DIR` ä¸­ã€‚
    *   **è¿™ä¸ªè¿‡ç¨‹å®Œæˆäº†è·¯å¾„çš„â€œæ ‡å‡†åŒ–â€å’Œâ€œç²¾ç‚¼â€ã€‚**

#### ç¬¬ä¸‰æ£’ï¼š`maturin` -> `cargo` å­è¿›ç¨‹ (`compile.rs`)

*   **å˜é‡**: `PYO3_CROSS_LIB_DIR`
*   **è§’è‰²**: **è¾“å‡º**
*   **è¯´æ˜**:
    1.  ç°åœ¨ `maturin` å‡†å¤‡è°ƒç”¨ `cargo` æ¥çœŸæ­£ç¼–è¯‘æ‚¨çš„ Rust ä»£ç äº†ã€‚
    2.  ä½†æ˜¯ï¼Œ`cargo` åœ¨ç¼–è¯‘æ—¶ä¼šè¿è¡Œ `pyo3` çš„æ„å»ºè„šæœ¬ï¼ˆ`build.rs`ï¼‰ï¼Œè€Œè¿™ä¸ªè„šæœ¬**åªè®¤è¯†** `PYO3_CROSS_LIB_DIR` è¿™ä¸ªç¯å¢ƒå˜é‡åã€‚å®ƒéœ€è¦ä»è¿™ä¸ªå˜é‡è·å– Python åº“çš„é“¾æ¥ä¿¡æ¯ã€‚
    3.  å› æ­¤ï¼Œå°±å‡ºç°äº†æ‚¨çœ‹åˆ°çš„è¿™æ®µä»£ç ï¼š
        ```rust
        // in src/compile.rs
        if let Some(lib_dir) = env::var_os("MATURIN_PYTHON_SYSCONFIGDATA_DIR") {
            build_command.env("PYO3_CROSS_LIB_DIR", lib_dir);
        }
        ```
    4.  è¿™æ®µä»£ç çš„å«ä¹‰æ˜¯ï¼š`maturin` åœ¨å¯åŠ¨ `cargo` è¿™ä¸ªå­è¿›ç¨‹ï¼ˆ`build_command`ï¼‰ä¹‹å‰ï¼Œè¯»å–å®ƒåœ¨ç¬¬äºŒæ£’ä¸­ç®—å‡ºçš„**ç²¾ç¡®è·¯å¾„**ï¼ˆå­˜åœ¨ `MATURIN_PYTHON_SYSCONFIGDATA_DIR` ä¸­ï¼‰ï¼Œç„¶åç”¨è¿™ä¸ªç²¾ç¡®çš„è·¯å¾„ï¼Œä¸º `cargo` å­è¿›ç¨‹**é‡æ–°è®¾ç½®** `PYO3_CROSS_LIB_DIR` ç¯å¢ƒå˜é‡ã€‚

---

#### æ€»ç»“

*   **å…³ç³»**: `MATURIN_PYTHON_SYSCONFIGDATA_DIR` æ˜¯ `PYO3_CROSS_LIB_DIR` çš„ä¸€ä¸ª**â€œç²¾ç‚¼â€å’Œâ€œå†…éƒ¨æš‚å­˜â€**ç‰ˆæœ¬ã€‚
*   **ä¸ºä»€ä¹ˆè¿™ä¹ˆåš**: è¿™æ˜¯ä¸€ä¸ª**â€œå…³æ³¨ç‚¹åˆ†ç¦»â€**çš„è®¾è®¡ã€‚
    *   `maturin` çš„ä¸»è¿›ç¨‹è´Ÿè´£å¤æ‚çš„è·¯å¾„æŸ¥æ‰¾å’Œæ ‡å‡†åŒ–é€»è¾‘ï¼Œå¹¶å°†ç»“æœå­˜å…¥è‡ªå·±çš„å†…éƒ¨å˜é‡ `MATURIN_...`ã€‚
    *   å½“å®ƒéœ€è¦è°ƒç”¨å…¶ä»–å·¥å…·ï¼ˆå¦‚ `cargo` å’Œ `pyo3` çš„æ„å»ºè„šæœ¬ï¼‰æ—¶ï¼Œå®ƒä¼šå°†è¿™ä¸ªæ ‡å‡†åŒ–çš„ç»“æœï¼Œé€šè¿‡è¿™äº›å·¥å…·æ‰€æœŸæœ›çš„ã€å›ºå®šçš„ç¯å¢ƒå˜é‡åç§°ï¼ˆ`PYO3_...`ï¼‰ä¼ é€’è¿‡å»ã€‚

æ‰€ä»¥ï¼Œæ‚¨çœ‹åˆ°çš„ `if` è¯­å¥å¹¶ä¸æ˜¯ä¸€ä¸ªæ— æ„ä¹‰çš„å¾ªç¯èµ‹å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªå…³é”®çš„**â€œä¼ é€’â€**æ­¥éª¤ï¼Œç¡®ä¿ä¸‹ä¸€é˜¶æ®µçš„ç¼–è¯‘å·¥å…·èƒ½æ‹¿åˆ°æœ€å‡†ç¡®çš„è·¯å¾„ä¿¡æ¯ã€‚



`PYO3_CROSS_LIB_DIR` åœ¨ `maturin` è¿è¡Œ**å‰å**ï¼ˆæˆ–è€…æ›´å‡†ç¡®åœ°è¯´ï¼Œåœ¨ `maturin` **ä¸»è¿›ç¨‹**å’Œå®ƒå¯åŠ¨çš„ **`cargo` å­è¿›ç¨‹**ä¹‹é—´ï¼‰çš„å€¼**ä¸ä¸€å®šç›¸åŒ**ã€‚

æˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£è¿™ä¸¤ä¸ªå€¼ï¼š

1.  **åˆå§‹çš„ `PYO3_CROSS_LIB_DIR` (ç”±æ‚¨çš„è„šæœ¬è®¾ç½®)**
    *   **è§’è‰²**: **â€œæœç´¢èµ·ç‚¹â€**ã€‚
    *   **å€¼**: ä¸€ä¸ªç›¸å¯¹â€œç²—ç•¥â€çš„ç›®å½•ï¼Œä¾‹å¦‚ `.../prefix/lib`ã€‚
    *   **ç›®çš„**: å‘Šè¯‰ `maturin`ï¼šâ€œç›®æ ‡å¹³å°çš„ Python åº“å¤§æ¦‚åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹çš„æŸä¸ªåœ°æ–¹ï¼Œä½ è‡ªå·±è¿›å»æ‰¾ä¸€ä¸‹ã€‚â€

2.  **ä¼ é€’ç»™ `cargo` å­è¿›ç¨‹çš„ `PYO3_CROSS_LIB_DIR` (ç”± `maturin` è®¾ç½®)**
    *   **è§’è‰²**: **â€œç²¾ç¡®çš„é“¾æ¥è·¯å¾„â€**ã€‚
    *   **å€¼**: `maturin` ç»è¿‡æœç´¢åæ‰¾åˆ°çš„ã€åŒ…å« `_sysconfigdata` æ–‡ä»¶çš„é‚£ä¸ªâ€œç²¾ç¡®â€çš„å­ç›®å½•ï¼Œä¾‹å¦‚ `.../prefix/lib/python3.13`ã€‚
    *   **ç›®çš„**: å‘Šè¯‰ `pyo3` çš„æ„å»ºè„šæœ¬ï¼šâ€œä¸è¦å†æ‰¾äº†ï¼Œè¿™å°±æ˜¯ä½ è¦é“¾æ¥çš„åº“çš„ç¡®åˆ‡ä½ç½®ã€‚â€

**æ€»ç»“ï¼š**

`maturin` æ¥æ”¶ä¸€ä¸ªâ€œç²—ç•¥â€çš„è¾“å…¥ï¼Œé€šè¿‡å†…éƒ¨å¤„ç†å°†å…¶â€œç²¾ç‚¼â€æˆä¸€ä¸ªç²¾ç¡®çš„è·¯å¾„ï¼Œç„¶åå°†è¿™ä¸ªç²¾ç¡®çš„ç»“æœé€šè¿‡åŒä¸€ä¸ªå˜é‡åä¼ é€’ç»™ä¸‹ä¸€é˜¶æ®µçš„å·¥å…·ã€‚

æ‰€ä»¥ï¼Œæ‚¨çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼šè¿™ä¸ªå˜é‡çš„å€¼åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¢«**ä¼˜åŒ–å’Œä¿®æ­£**äº†ã€‚è¿™ç§è®¾è®¡è®©ç”¨æˆ·ï¼ˆè„šæœ¬ç¼–å†™è€…ï¼‰çš„é…ç½®å¯ä»¥æ›´ç®€å•ï¼Œè€ŒæŠŠå¤æ‚çš„è·¯å¾„æŸ¥æ‰¾å·¥ä½œç•™ç»™äº† `maturin` å†…éƒ¨å»å®Œæˆã€‚